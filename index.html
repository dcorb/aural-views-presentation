<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>reveal.js - The HTML Presentation Framework</title>

    <meta name="description" content="A framework for easily creating beautiful presentations using HTML">
    <meta name="author" content="Hakim El Hattab">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="src/reveal/css/reveal.min.css">
    <link rel="stylesheet" href="src/fullscreen-img/fullscreen-img.css">
    <link rel="stylesheet" href="src/reveal/css/theme/default.css" id="theme">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="src/reveal/lib/css/zenburn.css">

    <!-- If the query includes 'print-pdf', use the PDF print sheet -->
    <script>
      document.write( '<link rel="stylesheet" href="src/reveal/css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
    </script>

    <!--[if lt IE 9]>
    <script src="src/reveal/lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="reveal">

      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">

        <section>
          <img src="images/opener.png" />
        </section>

        <!-- Introduction -->
        <section>
          <h1>Drupal Speaks</h1>
          <h3>Aural user interfaces and how we're making Drupal 8 the most accessible CMS in the world</h3>
          <div style="display:table;width:100%">
            <p style="display:table-cell">
              <small>Jesse Beach<br />Senior Front End Developer<br /><a href="http://twitter.com/jessebeach" title="Twitter page for Jesse Beach">@jessebeach</a></small>
            </p>
            <p style="display:table-cell">
              <small>Wim Leers<br />Senior Software Engineer<br /><a href="http://twitter.com/wimleers" title="Twitter page for Wim Leers">@wimleers</a></small>
            </p>
          </div>
          <aside class="notes">
            <p>[Wim] Hi I'm Wim Leers.</p>
            <p>[Jesse] And I'm Jesse Beach. I work at Acquia on the Spark team as a front end developer.</p>
            <p>This is a session about making data and interactions accessible everyone.</p>
            <p>[Wim] So we're talking about accessibility, right?</p>
            <p>[Jesse] Yes, but first I must admit that I am not an accessibility expert.</p>
            <p>[Wim] And neither am I.</p>
            <p>[Jesse] What we are, are two front end developers with a passion for beautiful, usable and delightful UIs. And given that all of you out there — front-end developers, usability experts, UX designers, back-end developers, doc writers, community organizers — of course feel the same way, then we are all, therefore, concerned with accessibility. Because accessibility is about creating rich experiences for everyone.</p>
            <p>[Wim] A rich experience is one that anyone, regardless of the range of their abilities, finds satisfying. That means, given a task, they can understand what actions they need to undertake, how to undertake them, what the results of those actions are and that the task completed successfully or not.</p>
            <p>[Jesse] A rich experience is also one that provides awareness of possibilities and constraints, because as humans, we don't always know what we want to do until we've explored a bit.</p>
            <p>[Wim] We find inspiration through interaction and that is what a rich UI does, it inspires and encourages.</p>
          </aside>
        </section>

        <!-- Overview of accessibility in Drupal -->
        <section>
          <section>
            <h1>Isn't Drupal accessible already?</h1>
            <aside class="notes">
              <p>A question I think we're all asking is "Isn't Drupal accessible already?"</p>
              <p>[Jesse] Well, yes in a way. We, as a community, are quite aware of accessibility concerns.</p>
              <p>Note: The next few slides are meant to read quickly. They give us an overview of Drupal's current accessibility support and policies.</p>
            </aside>
          </section>
          <section>
            <blockquote cite="http://drupal.org/about/accessibility">As an inclusive community, we are committed to making sure that Drupal is an accessible tool for building websites that can also be accessed by people with disabilities.</blockquote>
            <aside class="notes">
              <p>[Jesse] We have a statement pledging that we are committed, as a community, to making Drupal accessible.</p>
            </aside>
          </section>
          <section>
            <h1>We have an accessibility checklist</h1>
            <div class="sources">
              <small><a href="http://drupal.org/node/465106">http://drupal.org/node/465106</a></small>
            </div>
          </section>
          <section>
            <ul>
              <li class="roll-in">All non-text content has alternative text</li>
              <li class="fragment">All data tables have headings</li>
              <li class="fragment">Users can complete and submit all forms</li>
              <li class="fragment">Links make sense out of context</li>
              <li class="fragment">Media has captions and/or transcripts</li>
              <li class="fragment">Non-HTML content is accessible</li>
              <li class="fragment">Users can skip repetitive elements on the page</li>
              <li class="fragment">Meaning is not conveyed through color alone</li>
              <li class="fragment">Content is clearly written and easy to read</li>
              <li class="fragment">JavaScript is accessible</li>
              <li class="fragment">The site complies to standards</li>
            </ul>
            <aside class="notes">
              <p>note: These items are all links. Add the links (from http://drupal.org/node/465106) when we port this to HTML.</p>
            </aside>
          </section>
          <section><h1>We have accessibility tags for issues</h1></section>
          <section>
            <p>+needs accessibility review</p>
            <p class="fragment roll-in">+needs color accessibility review</p>
            <p class="fragment roll-in">+a11y</p>
            <aside class="notes">
              <p>[Jesse] We have accessibility tags for issue queues.</p>
              <p>These tags are important as markers for issue reviewers to let them find issues that require accessibility work or testing.</p>
            </aside>
          </section>
          <section>
            <h1>Accessibility pledge</h1>
            <p>#D7AX</p>
            <p>#D8AX</p>
          </section>
          <section>
            <blockquote>I pledge to make this [module or theme] as accessible as it can be. If you find any flaws, please submit an issue [link to issue queue]. Help me fix them if you can.</blockquote>
            <div class="sources">
              <p><small><a href="http://drupal.org/node/394094">Accessibility tools and best practices</a></small></p>
              <p><small><a href="http://groups.drupal.org/node/66323">Accessibility pledge wiki</a></small></p>
            </div>
            <aside class="notes">
              [Jesse] We have an accessibility pledge for module maintainers.
            </aside>
          </section>
          <section fullscreen-img="images/pillow-fight.jpg" data-source="http://penningpanda.wordpress.com/2010/03/30/international-pillow-fight-day/">
            <aside class="notes">
              <p>Building accessible UIs takes effort. As web workers, we already have so much to think about. It's like being in a pillow fight. Everyone means well; they want to have fun. But it can get chaotic and messy very quickly.</p>
              <p>What we have tried to do in our work is provide tools and patterns in code, for module and theme developers. We also want to further expand the awareness of universal access among web developer. To show them that they can make accessible UIs a part of their daily workflow.</p>
            </aside>
          </section>
        </section>

        <!-- Aural user interfaces and why we need to consider them -->
        <section>
          <section>
            <h1>Aural user interfaces</h1>
            <aside class="notes">
              <p>Our work regarding Drupal 8 accessibility has focused primarily on enabling aural user interfaces.</p>
            </aside>
          </section>
          <section>
            <h1>Drupal Speaks?</h1>
            <aside class="notes">
              <p>Yes, Drupal speaks!</p>
            </aside>
          </section>

          <section>
            <h1>You betcha!</h1>
            <h2>Let’s have a listen</h2>
            <aside class="notes">
              <p>Well, to be more precise, screen reading software speaks.</p>
            </aside>
          </section>

          <section>
            <iframe width="100%" height="100%" src="http://www.youtube.com/embed/-GlDpNRBU-8" frameborder="0" allowfullscreen></iframe>
            <aside class="notes">
              <p>In this example, we'll see me using the tab key to navigate several interfaces within a typical Drupal page.</p>
            </aside>
          </section>

          <section>
            <h1>Why consider speech output?</h1>
            <h2>Isn't semantic HTML enough?</h2>
            <aside class="notes">
            </aside>
          </section>

          <section>
            <iframe width="100%" height="100%" src="http://www.youtube.com/embed/D_HqFh63vGg" frameborder="0" allowfullscreen></iframe>
            <aside class="notes">
              <p>This video is meant to provide a stark example of what a complex interface interaction feels like when we remove the visual component.</p>
              <p>NOTE: We're picking on the Tour module. It's meant to prove a point. Lots of aural UI in Drupal needs work and I had to pick something to illustrate this.</p>
            </aside>
          </section>

          <section>
            <h1>The accessible-to-usable scale</h1>
          </section>
          <section>
            !! We need the chart on slide 19 here.
            <aside class="notes">
              <p>Note: [Wim] Chart.js does not support labels within pie charts :( How do you want to do this?</p>
            </aside>
          </section>

          <section>
            !! We need the pie chart on slide 20 here.
            <aside class="notes">
              <p>[Jesse]Most user interface design and responsive development focuses on two aspects of this universal access pie.</p>
              <ol>
                <li>Hearing</li>
                <li>Sight</li>
                <li>Color contrast</li>
                <li>Component size</li>
                <li>Interaction dexterity</li>
                <li>Cognitive ability</li>
                <li>Input method (mouse, touch, keyboard, voice)</li>
                <li>Device capability (screen size, processing speed, bandwidth)</li>
              </ol>
              <p>Note: [Wim] Chart.js does not support labels within pie charts :( How do you want to do this?</p>
            </aside>
          </section>
        </section>

        <section>
          <section>
            <h1>Accessibility</h1>
          </section>
          <section>
            <h1>Rich experience</h1>
          </section>
          <aside class="notes">
            <p>Rather than accessibility for some, we talk about rich experiences for everyone. This phrase comes from Everett Zufelt.</p>
          </aside>
        </section>

        <section>
          <section>
            <h1>dynamic applications undergo state and property changes.</h1>
          </section>
          <section>
            <iframe width="100%" height="100%" src="http://www.youtube.com/embed/wqmEYhe2JZ0" frameborder="0" allowfullscreen></iframe>
            <aside class="notes">
              <p>[Jesse] A few examples of infinite scrolling. Page content is updated dynamically as the user scrolls a page. Ideally, this would not only be visually indicated. It would be indicated through aural updates as well.</p>
            </aside>
          </section>
          <section>
            <h1>those changes must be <em>expressed</em></h1>
            <aside class="notes">
            </aside>
          </section>
          <section>
            <h1>we build <em>interfaces</em></h1>
            <aside class="notes">
            </aside>
          </section>
          <section>
            <h1>for <em>everyone</em></h1>
            <aside class="notes">
            </aside>
          </section>
          <section>
            <h1>so how do we do it?</h1>
            <aside class="notes">
            </aside>
          </section>
          <section>
            <h1><em>show</em> and <em>announce</em> the changes</h1>
            <aside class="notes">
            </aside>
          </section>
          <section>
            <iframe width="100%" height="100%" src="http://www.youtube.com/embed/xfdQYToZ9No" frameborder="0" allowfullscreen></iframe>
            <aside class="notes">
            </aside>
          </section>
        </section>

        <section>
          <section>
            <h1>ARIA</h1>
            <p class="fragment roll-in"><i>Accessible Rich Internet Applications</i></p>
            <aside class="notes">
              <p>So let's move from our brief introduction to accessibility in Drupal to the work currently underway to make it even better.</p>
              <p>[Wim] Modern UIs are complex. As we introduce just-in-time information and dynamically updating pages, we also introduce new design patterns to express to the user that their page contents have changed: spinner icons, quick flashes of color, shifting boxes, fade in effects. Almost exclusively, these indicators are visual. While we were helping to improve authoring experience tools for Drupal 8, we realized that Drupal is, too, evolving into a complex and dynamic front end application. That we need to express to the user when and how their interface has updated. And that we need to do this within Drupal's guidelines. We can't only express updates visually because for users who are blind, our UIs are frustratingly silent about what's going on.</p>
            </aside>
          </section>
          <section>
            <h2>We use ARIA attributes to represent through markup what you are accustomed to representing through visual language.</h2>
          </section>
          <section>
            <h2>States like</h2>
            <ul>
              <li class="fragment roll-in">active</li>
              <li class="fragment roll-in">disabled</li>
              <li class="fragment roll-in">pressed</li>
            </ul>
          </section>
          <section>
            <h2>Properties like</h2>
            <ul>
              <li class="fragment roll-in">label</li>
              <li class="fragment roll-in">form</li>
              <li class="fragment roll-in">dialog</li>
            </ul>
          </section>
          <section>
            !! We need ARIA code examples here.
            <aside class="notes">
            </aside>
          </section>
          <section>
            <h1>ARIA-Live</h1>
            <p class="fragment">Describes an HTML element that reads its contents when those contents are altered.</p>
          </section>
          <section>
            <pre><code data-trim contenteditable class="html">&lt;div aria-live="polite" class="element-hidden"&gt;
  some text to speak
&lt;/div&gt;</code></pre>
          </section>
          <aside class="notes">
            <p>Describes an HTML element that reads its contents when those contents are altered.</p>
          </aside>
        </section>

        <section>
          <section>
            <h1>Drupal.announce</h1>
            <aside class="notes">
              <p>In Drupal 8, we provide a simple way to turn text into speech.</p>
            </aside>
          </section>
          <section>
            <pre><code data-trim contenteditable class="javascript">
  // Pass a string.
  Drupal.announce('The application has been updated.');

  // Make sure the string is translatable.
  Drupal.announce(
    Drupal.t('The application has been updated.')
  );
            </code></pre>
            <aside class="notes">
            </aside>
          </section>
          <section>
            <h2>Quick successive calls</h2>
            <pre><code data-trim contenteditable class="html">&lt;script&gt;
// Quick successive calls will concatenate.
Drupal.announce(Drupal.t('Freegan before they sold out polaroid.'));
Drupal.announce(Drupal.t('Pitchfork letterpress polaroid four.'));
Drupal.announce(Drupal.t('Cardigan cosby sweater fanny pack.'));
&lt;/script&gt;

&lt;div id="drupal-live-announce" class="element-invisible" aria-live="polite" aria-busy="false"&gt;
Freegan before they sold out polaroid.
Pitchfork letterpress polaroid four.
Cardigan cosby sweater fanny pack.
&lt;/div&gt;</code></pre>
          </section>
        </section>

        <section>
          <section>
            <h1>Wait, doesn't this accessibility feature depend on JavaScript?</h1>
          </section>
          <section>
            <h1>Isn't that bad?</h1>
          </section>
          <section>
            <table style="border: 1px solid gray; margin: 0 auto">
              <thead>
                <tr>
                  <th style="width: 60%; border-bottom: 1px solid white">JavaScript enabled</th>
                  <th style="border-bottom: 1px solid white">Respondents</th>
                </tr>
              </thead>
              <tbody >
                <tr >
                  <td>Yes</td>
                  <td>98.6%</td>
                </tr>
                <tr>
                  <td>No</td>
                  <td>1.4%</td>
                </tr>
              </tbody>
            </table>
            <div style="margin-top: 2em" class="sources">
              <h6>Source</h6>
              <small><a href="http://webaim.org/projects/screenreadersurvey4/">WebAIM 2012 Survery</a></small>
            </div>
            <aside class="notes">
              <p>The rate of users that employ a screen reader and who have JavaScript enabled is about the same as those who don't a screen reader.</p>
              <p>http://developer.yahoo.com/blogs/ydn/many-users-javascript-disabled-14121.html</p>
            </aside>
          </section>
        </section>

        <section>
          <section>
            <h1>How-to: announcements</h1>
            <p>Using <code>Drupal.announce</code>.</p>
          </section>
          <section>
            <h2>Identify a dynamically updated piece of content on the page.</h2>
          </section>
          <section>
            <h2>And then ask</h2>
            <p class="fragment">Is this content relevant to the user?</p>
            <p class="fragment">Should the user be aware?</p>
          </section>
          <section>
            <h2>Yes and yes?</h2>
            <p class="fragment">Then use <code>Drupal.announce</code>!</p>
          </section>
          <section>
            <h2>This is what we recommend right now</h2>
            <p class="fragment">DONT: <q>Tabbing is constrained.</q></p>
            <p class="fragment">DO: <q>Tabbing is constrained to the Overlay.</q></p>
          </section>
          <aside class="notes">
            <p>This is what we recommend right now. But we're not sure if this is right. Like all interfaces, we need designers to help us!</p>
            <p>We can learn from Voice Interface design from telephony.</p>
            <p>Designing for voice and sound is not new, but it is new to many web developers and designers.</p>
          </aside>
        </section>

        <section>
          <section>
            <h1>Not familiar with using a screen reader?</h1>
          </section>
          <section>
            <h2>Install the "Devel accessibility" module</h2>
            <p><a href="http://drupal.org/project/devel_a11y" title="Link to the Devel accessibility module's project page on drupal.org.">http://drupal.org/project/devel_a11y</a></p>
          </section>
          <section>
            <h2><code>console.log</code> announcements</h2>
            <img src="images/devel_a11y/drupal.announce.log.png" alt="Screenshot of devel_a11y's ability to log announcements via Drupal.announce to the browser's console." />
            <aside class="notes">
              <p>[Wim] It supports logging <code>Drupal.announce</code>ments.</p>
            </aside>
          </section>
          <section>
            <h2>Visualize tabbing constraints</h2>
            <img src="images/devel_a11y/tabbingmanager.visualize.png" alt="Screenshot of devel_a11y's ability to visualize tabbing constraints defined by the TabbingManager." />
            <aside class="notes">
              <p>[Wim] And it supports both logging and visualizing <code>Drupal.TabbingManager</code> tabbing constraints. A CSS animation occurs whenever the tabbing constraints change, tabbable elements have a red box shadow, the currently focused tabbable element has a green box shadow.</p>
            </aside>
          </section>
        </section>

        <section>
          <section>
            <h1>Tabbing management</h1>
            <h2>Guide the flow</h2>
          </section>
          <section>
            <h2>Constrain tabbable elements to just those necessary to complete a task.</h2>
          </section>
          <section>
            <h2>Overlay module</h2>
            <img src="images/devel_a11y/tabbingmanager.visualize.png" alt="Screenshot of Overlay module's constrained tabbing — visualized by devel_a11y." />
          </section>
          <section>
            <h2>Edit module</h2>
            <p>TODO: Need an image of Edit with tabbing constrained. Visualized by devel_a11y.</p>
            <p>This still needs to be implemented in Edit module: <a href="http://drupal.org/node/1844220#comment-7378902">http://drupal.org/node/1844220#comment-7378902</a></p>
          </section>
          <section>
            <h2>Who is responsible?</h2>
            <aside class="notes">
              <p>Who is responsible for tabbing management?</p>
            </aside>
          </section>
          <section>
            <h2>The developer!</h2>
          </section>
          <!--

          [Wim] I don't see the added value of this slide?

          <section>
            <h3>(no really)</h3>
          </section>
          -->
          <section>
            <blockquote>Depending upon the action to be performed by the dialog, the object with focus before the dialog box is opened should be saved. This will allow restoring focus to this element when the dialog box is closed.</blockquote>
            <div class="sources">
              <small><a href="http://www.w3.org/TR/wai-aria-practices/#modal_dialog">http://www.w3.org/TR/wai-aria-practices/#modal_dialog</a></small>
            </div>
            <aside class="notes">
              <!--
              [Wim] Without a clear example, this is probably going to be a hard to grok slide.
              -->
            </aside>
          </section>
          <section>
            <h2>Not gonna lie, this stuff is messy</h2>
          </section>
          <section>
            <h2>Managing tabbing is <em>difficult</em></h2>
          </section>
          <aside class="notes">
            <p>[Jesse] What we want to avoid is putting the responsibility of tabbing management on every individual contributed module that might need it.</p>
          </aside>
        </section>

        <section>
          <section>
            <h1>How-to: tabbing management</h1>
            <p>Using <code>Drupal.TabbingManager</code>.</p>
          </section>
          <section>
            <h2>Apply tabbing constraint</h2>
            <p>Using a core API rather than reinventing.</p>
            <div class="fragment">
              <pre><code data-trim contenteditable class="javascript">manageTabbing: function () {
  var tabbingContext = this.model.get('tabbingContext');

  // Always release an existing tabbing context.
  if (tabbingContext) {
    tabbingContext.release();
  }

  // Create a new tabbing context when edit mode is enabled.
  if (!this.model.get('isViewing')) {
    tabbingContext = Drupal.tabbingManager.constrain($('.contextual-toolbar-tab, .contextual'));
    this.model.set('tabbingContext', tabbingContext);
  }
}</code></pre>
             <p><small>Example from <code>contextual.module</code>.</small></p>
            </div>
          </section>
          <section>
            <h2>Announce the details of the constraint</h2>
            <p>Using <code>Drupal.announce</code>.</p>
            <div class="fragment">
              <pre><code data-trim contenteditable class="javascript">announceTabbingConstraint: function () {
  var args =  {
    '@contextualsCount': Drupal.formatPlural(Drupal.contextual.collection.length, '@count contextual link', '@count contextual links')
  };

  Drupal.announce(Drupal.t('Tabbing is constrained to a set of @contextualsCount and the edit mode toggle.', args));
  Drupal.announce(Drupal.t('Press the esc key to exit.'));
},</code></pre>
              <p><small>Example from <code>contextual.module</code>.</small></p>
            </div>
          </section>
          <section>
            <h2>Complex tabbing flows</h2>
            <p>Tabbing contexts can be stacked and popped as a user moves between task flows, even between modules.</p>
          </section>
          <section>
            <iframe width="100%" height="100%" src="http://www.youtube.com/embed/Znu0ZFB1GA0" frameborder="0" allowfullscreen></iframe>
            <aside class="notes">
              <p>[Wim] Let's have another look at how tabbing is constrained when the user enables edit mode and then opens the overlay. Note how the edit mode tabbing constraint is restored after the overlay tabbing constraint context is removed.</p>
              <p>[Wim] The tabbing constraint contexts do not need to be managed by any module. If your module releases its constraints, but that constraint is overridden and not active, it will not be activated again later.</p>
            </aside>
          </section>
        </section>

        <section>
          <h1>Embrace <b>modalities</b></h1>
          <aside class="notes">
            <p>A modality refers to the medium that we use to access information. That medium may be visual, it may be aural; it might be through touch as well.</p>
            <p>We can account for modalities in our code. Indeed we've begun to do this in Drupal Core.</p>
          </aside>
          <!--
            [Wim] This is still too vague? I think the "better keyboard nav = better for power users" argument slide was a good one, so maybe that should be reintroduced here?
          -->
        </section>

        <section>
          <section>
            <h1>one <em>model</em>,<br />many <em>views</em></h1>
            <aside class="notes">
              <p>We are using Backbone to formalize modal interactions</p>
            </aside>
          </section>
          <section>
            <h2>Backbonification of Core JS</h2>
            <pre><code class="javascript">function toggleEditMode (event, data) {
  for (var i = contextuals.length - 1; i >= 0; i--) {
    contextuals[i][(data.status) ? 'detachHighlightBehaviors' : 'attachHighlightBehaviors']();
    contextuals[i].$region.toggleClass('contextual-region-active', data.status);
  }
}</code></pre>
            <p>versus</p>
            <pre><code class="javascript">_toggleEditMode: function (event, data) {
  Drupal.contextual.collection.each(function (model) {
    model.set('isLocked', data.status);
  });
}</code></pre>
            <aside class="notes">
              <ul>
                <li>[Wim] Instead of each piece of JS inventing its own structure (cfr. Drupal's NIH — Not Invented Here): use Models, Collections and Views.</li>
                <li>[Wim] From: the typical Drupal JS, where almost everything is DOM/DOM event driven.</li>
                <li>[Wim] To: well-structured JS, with a few very basic structures, we use Backbone's structures</li>
                <li>[Wim] So, question: "Why Backbone.js?".</li>
              </ul>
            </aside>
          </section>
          <section>
            <blockquote>The essential premise at the heart of Backbone has always been to try and <b style="text-decoration: underline">discover the minimal set of data-structuring</b> (Models and Collections) and user interface (Views and URLs) primitives that are useful when building web applications with JavaScript.</blockquote>
            <div class="sources">
              <small><a href="http://ashkenas.com/backbonejs-1.0/">Jeremy Ashkenas — http://ashkenas.com/backbonejs-1.0/</a></small>
            </div>
            <aside class="notes">
              <p>Why Backbone?</p>
              <p>No special reason.</p>
              <p>We don't want to impose a certain highly restrictive structure on JS, nor does Backbone.</p>
            </aside>
          </section>
          <section>
            <h2>Framework doesn't matter</h2>
          </section>
          <section>
            <h2>Separation of concerns matters</h2>
          </section>
          <section>
            <h2>Before Drupal 8</h2>
            <p class="fragment">event handlers<span class="fragment"> ⟶ rendering</span> <span class="fragment"> ⟶ debug hell</span></p>
            <aside class="notes">
              <p>[Wim] DOM event handlers <em>directly</em> performed rendering (i.e. DOM modifications). This made debugging very hard, painful, frustrating …</p>
            </aside>
          </section>
          <section>
            <h2>Now in Drupal 8</h2>
            <p class="fragment">events<span class="fragment"> ⟶ state</span></p>
            <p class="fragment">state<span class="fragment"> ⟶ rendering</span></p>
            <p class="fragment" style="margin-top: 1em">developer<span class="fragment"> ⟶ happy</span></p>
            <aside class="notes">
              <ul>
                <li>Most (if not all) JS benefits from its state being updated via events, and then things being rerendered in response to those state changes.</li>
                <li>No more subtle edge cases.</li>
                <li>Separation of concerns invites better/completer docs.</li>
                <li>Pre-Drupal 8 JS is often very complex to evolve, and to somebody who never saw the code, nigh impossible to understand all edge cases.</li>
                <li>So: Backbone because it's widely used, many docs, concise. It tries to do little!</li>
                <li>Finally: easy to refactor Backbone code to another framework.</li>
              </ul>
            </aside>
          </section>
          <section>
            <h2>Why Backbone.js?</h2>
            <pre><code class="javascript">function toggleEditMode (event, data) {
  for (var i = contextuals.length - 1; i >= 0; i--) {
    contextuals[i][(data.status) ? 'detachHighlightBehaviors' : 'attachHighlightBehaviors']();
    contextuals[i].$region.toggleClass('contextual-region-active', data.status);
  }
  }</code></pre>
            <p>versus</p>
            <pre><code class="javascript">_toggleEditMode: function (event, data) {
  Drupal.contextual.collection.each(function (model) {
    model.set('isLocked', data.status);
  });
  }</code></pre>
            <aside class="notes">
              <p>[Wim] This is pretty much the same slide as before — now the reader/attendee should be able to understand better why this is so much better.</p>
            </aside>
          </section>
        </section>

        <section>
          <section>
            <h1>How-to: Backbone.js for better accessibility</h1>
          </section>
          <section>
            <img src="images/backbone.png" alt="A schema explaning the different components of Backbone. Relevant parts to us: data &amp; state are modeled in Backbone Models. Backbone Models of the same type may be grouped in Backbone Collections if that is useful for the use case. Backbone Models are connected to Backbone Views via model event bindings, so that Backbone Views are able to update themselves whenver the data/state changes. A View is typically bound to a DOM element, within which it renders itself. " />
            <aside class="notes">
              <p>Source: http://kiranb.scripts.mit.edu/backbone-slides/#compenents-diagram</p>
              <p>Note that in Backbone.js, the View is a combination of a View and Controller. The Models are intentionally kept dumb, to make it easy to hook up new Views. Since the DOM also combines rendering (HTML elements rendered in a certain way) and event handling (DOM event handling), and the View is the connection to the DOM, this feels natural.<br />
              However, if you prefer a full separation, then it's entirely possible to have Views that are solely listening for events and updating the bound Model, and separate Views that are responsible for rendering.</p>
            </aside>
          </section>
          <section>
            <h2>Step 1: create a model</h2>
            <p>Contains state, is stupid. Views update it.</p>
            <div class="fragment">
              <pre><code class="javascript">Drupal.contextual.Model = Backbone.Model.extend({
  defaults: {
    // Whether the toggle is currently in "view" or "edit" mode.
    isViewing: true,
    // Whether the toggle should be visible or hidden.
    isVisible: false,
    // A TabbingContext object as returned by Drupal.TabbingManager:
    // the set of tabbable elements when edit mode is enabled.
    tabbingContext: null
  }
});
</code></pre>
              <p><small>Example from <code>contextual.module</code>.</small></p>
            </div>
          </section>
          <section>
            <h2>Step 2: create a visual view</h2>
            <p>99.9% of sites need visual output &amp; mouse + touch input.</p>
            <div class="fragment">
              <pre><code class="javascript">Drupal.contextual.VisualView = Backbone.View.extend({
  events: {
    'click': function () {
      this.model.set('isViewing', !this.model.get('isViewing')),
    }
  },
  initialize: function () {
    this.model.on('change', this.render, this);
  },
  render: function () {
    var $el = this.el;
    var m = this.model;
    $el.toggleClass('element-hidden', !m.get('isVisible'));
    $el.find('button').toggleClass('active', !m.get('isViewing'));
    return this;
  }
});
</code></pre>
              <p><small>Example from <code>contextual.module</code>.</small></p>
            </div>
            <aside class="notes">
              <p>As a general rule: a Backbone View must receive two things: a Backbone Model and its "root" DOM element.</p>
              <p>This is our current advised best-practice: create a Visual View that covers the needs of >90% of the users — being visual output and mouse + touch handling. Then the developer may add a Keyboard View to support keyboard navigation. And finally, the developer may add an Aural View, to provide auditive feedback via Drupal.announce and set the appropriate ARIA attributes.</p>
              <p>In other words: we don't want to force every developer to create an Aural View. We just want to make it as easy as possible to support it.</p>
            </aside>
          </section>
          <section>
            <h2>Step 3: create a keyboard view</h2>
            <p>For screen reader users &amp; power users: keyboard input.</p>
            <div class="fragment">
              <pre><code class="javascript">Drupal.contextual.KeyboardView = Backbone.View.extend({
  // …
});</code></pre>
              <p style="margin-top: 3em; font-style: italic">Unnecessary here: the <code>click</code> event in the <code>VisualView</code> already works with keyboard input. We don't need <code>focus</code> or <code>blur</code>.</p>
            </div>
          </section>
          <section>
            <h2>Step 4: create an aural view</h2>
            <p>For screen reader users: aural output.</small></p>
            <div class="fragment">
              <pre><code class="javascript">Drupal.contextual.AuralView = Backbone.View.extend({
  initialize: function () {
    this.model.on('change', this.render, this);
    this.model.on('change:isViewing', this.manageTabbing, this);
  },
  render: function () {
    var $el = this.el;
    var m = this.model;
    $el.find('button').attr('aria-pressed', !m.get('isViewing'));
    return this;
  },
  manageTabbing: function () {
    // See TabbingManager example.
    Drupal.announce('&lt;a relevant, explanatory message&gt;');
  }
});
</code></pre>
              <p><small>Example from <code>contextual.module</code>.</small></p>
            </div>
          </section>
          <section>
            <h2>All done!</h2>
            <p>Everything remains in sync!</p>
            <p>Just like that.</p>
          </section>
          <section>
            <h2>Best practice is evolving as we development more complex interactions.</h2>
            <aside class="notes">
              <p>As Drupal developers, we are all responsible for best practices.</p>
              <p>since these types of UIs are new (to us at least) we're going to have numerous breakthroughs that replace our previous best practices.</p>
            </aside>
          </section>
        </section>

        <section>
          <h1>Be <b>proud</b> of what we're building</h1>
          <p class="fragment">Toolbar: most accessible toolbar evar?!</p>
          <p class="fragment">Edit: complex, highly interactive "app", yet still accessible</p>
          <p class="fragment">Contextual Links: consistency improves a11y</p>
          <p class="fragment">Accessible, spoken View configuration?? It's possible!</p>
          <aside class="notes">
          </aside>
        </section>

        <section>
          <h1>a UI is <b>sight</b>, and <b>sound</b> and <b>touch</b></h1>
          <aside class="notes">
          </aside>
        </section>

        <section>
          <h1>and <b>your</b> module?</h1>
          <aside class="notes">
          </aside>
        </section>

        <section>
          <section>
            <h1>References</h1>
          </section>
          <section>
            <ol>
              <li>Screen Reader User Survey #4. 2013. http://webaim.org/projects/screenreadersurvey4/</li>
              <li>http://kiranb.scripts.mit.edu/backbone-slides/#compenents-diagram</li>
            </ol>
          </section>
          <aside class="notes">
          </aside>
        </section>

        <section>
          <section>
            <h1>Resources</h1>
          </section>
          <section>
            <ol>
              <li>http://previousnext.com.au/blog/so-you-want-be-accessible</li>
              <li>http://squizlabs.github.io/HTML_CodeSniffer/</li>
              <li>http://webaim.org/projects/screenreadersurvey4/</li>
              <li><a href="http://penningpanda.wordpress.com/2010/03/30/international-pillow-fight-day/">Pillow fight</a></li>
            </ol>
          </section>
          <aside class="notes">
          </aside>
        </section>

        <section>
          <h2>How do we make aural UIs informative without being annoying?</h2>
          <p>Listening to long instruction sentences gets annoying if they don't introduce more info and just repeat the same thing on every page.  Eventually, one might want to turn off these audio announcements.</p>
          <aside class="notes">
          </aside>
        </section>

        <section>
          <img src="images/closer.png" />
          <aside class="notes">
          </aside>
        </section>

      </div>

    </div>

    <script src="src/reveal/lib/js/head.min.js"></script>
    <script src="src/reveal/js/reveal.min.js"></script>

    <script>

      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

        // Optional libraries used to extend on reveal.js
        dependencies: [
          { src: 'src/fullscreen-img/fullscreen-img.js'},
          { src: 'src/reveal/lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'src/reveal/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'src/reveal/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'src/reveal/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: 'src/reveal/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
          { src: 'src/reveal/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
          // { src: 'src/reveal/plugin/search/search.js', async: true, condition: function() { return !!document.body.classList; } }
          // { src: 'src/reveal/plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
        ]
      });

    </script>

  </body>
</html>
